var socket=io();$(document).ready(function(){var n="",t=1250,e=4;socket.on("identity",function(t){n=t.un,$("#myid span").html(t.un)}),socket.on("drop",function(n){var e=$("#aggregate span").length;e>t&&$("#aggregate").find("span:nth-last-child("+e+")").remove(),$("#aggregate").append("<span class='"+n.usr+"'>"+n.content+"</span>"),0===$("#userlist ."+n.usr).length&&($("#connected span").html(n.conn+1),$("#userlist ul").append("<li class='"+n.usr+"'>"+n.usr+"</li>"))}),socket.on("join",function(n){$("#connected span").html(n.conn),$("#totalconnections span").html(n.totalconnections),$("#userlist ul").append("<li class='"+n.un+"'>"+n.un+"</li>"),$("#notification").html("<span class='joined'>"+n.un+"</span>")}),socket.on("leave",function(n){$("#notification").html("<span class='left'>"+n.un+"</span>"),$("#connected span").html(n.conn),$("."+n.un).remove()}),$("#userinput").keyup(function(t){var s=$("#userinput").val();socket.emit("drip",{un:n,letter:s}),$("#userinput").val(""),$("#mytext").append(s);var a=$("#mytext span").length;a>e&&$("#mytext").find("span:nth-last-child("+a+")").remove()}),$("ul").on("click","li",function(){$("#usertext").html("");var n="."+$(this).text(),t=$("#aggregate "+n).text();$("#usertext").html(t)})});